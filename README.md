# 1. 프로젝트 소개
**인체의 움직임을 디지털 형태로 기록하는 모션 캡처 시스템 개발**

이 프로젝트는 최근 여러 산업에서 활용되는 모션 캡처 시스템울 보편화하여 일상에서 유용히 사용할 수 있는 모션 캡처 시스템을 개발하였습니다. 특히, 비교적 비용이 저렴한 관성 센서를 이용한 관성식 방식을 채택하고 센서 간의 무선 통신을 이루어 편의성과 성능 향상 방법에 대한 연구를 목적으로 진행되었습니다.

목표는 다음과 같습니다.
* 편의성 및 성능을 향상시킨 무선 네트워크 시스템 개선
* 네트워크를 통해 받는 데이터를 바탕으로 디지털 인체 모델로 모션 확인
* 저가의 보급형 관성식 모션 캡처


# 2. 팀 소개
Park Haemi, hmpark042@gmail.com, Unity 개발 및 IMU Fusion 분석

Park Minsu, , mingmaeng98@gmail.com, BLE를 이용한 센서/Gateway 통신 및  소켓 통신 개발


# 3. 구성도
![image](https://user-images.githubusercontent.com/48706944/195280835-3e7b6c61-756c-4de7-aecd-105171292d8c.png)

본 프로젝트는 크게 인체의 움직임을 확인할 수 있는 IMU 센서, 센서와 블루투스 통신을 하여 그 데이터를 받아오는 게이트웨이, 게이트웨이와 소켓 통신을 하여 센서의 데이터를 받아 디지털 모델로 시각화하는 애플리케이션으로 나눌 수 있습니다.

## 센서 보드
* IMU 센서가 연결된 STM 보드를 신체 부위에 부착합니다. 최대한 정확한 데이터를 얻어 높은 품질의 모션 캡처를 이루기 위해 센서는 흔들림 없이 적절하게 부착되어야 합니다.
* IMU 센서에서 얻어진 데이터는 STM 보드에서 Kalman Filter를 통과하여 Motion Fusion 데이터를 블루투스로 전송합니다.
* STM 보드는 블루투스 서버를 구축하여 게이트웨이와 통신을 이룰 수 있는 거리 안에 위치합니다.

## 게이트웨이
* 게이트웨이는 근처 블루투스 서버를 찾아 연결 후 Motion Fusion Notification을 Enable하여 센서가 Motion Fusion 데이터를 전송하게끔 합니다.
* 소켓 서버를 열어 애플리케이션의 소켓 연결을 대기합니다.
* 소켓 통신이 시작되면 센서 보드로부터 받은 데이터를 전송합니다.

## 애플리케이션
* 관절이 구분되어 있는 인체형 모델을 사용하여 신체 부위에 부착한 센서에 데이터를 얻어 모션 캡처를 시각화합니다.
* 게이트웨이의 Address와 Port 번호로 소켓 통신을 연결하여 데이터를 받아올 수 있습니다.

# 4. 소개 및 시연 영상

[![32조 인체의 움직임을 디지털 형태로 기록하는 모션 캡처 시스템 개발](http://img.youtube.com/vi/voVcvT9WUGQ/0.jpg)](https://www.youtube.com/watch?v=voVcvT9WUGQ)


# 5. 사용법
본 프로젝트는 Window 환경에서 Motion Capture 디렉토리 안에 있는 MotionCapture.exe 파일을 실행하여 사용할 수 있습니다.

## 게이트웨이
![image](https://user-images.githubusercontent.com/48706944/195278497-60413829-4d1d-4f8c-bc66-984ddc513696.png)

* 라즈베리 파이의 파이썬 파일을 실행해 소켓 서버가 엽니다.
* 애플리케이션에서 소켓 통신을 연결하면 근처에 있는 센서를 찾습니다.
* 연결하고자 하는 센서를 입력해 센서와 게이트웨이를 연결합니다.

## 애플리케이션
![빌드사진](https://user-images.githubusercontent.com/48706944/195005486-e98a49db-181e-4472-b95d-8328cca30ee1.png)

* 본 프로젝트는 센서 및 게이트웨이 세팅 완료를 요구합니다.
* 입력칸에 IP Address와 Port 번호를 입력한 후 SAVE 버튼을 눌러 게이트웨이 세팅을 변경할 수 있습니다.
* 게이트웨이에서 소켓 서버를 열었다면 Start Streaming 버튼을 클릭합니다.
* 소켓 연결 및 게이트웨이에서 센서를 성공적으로 발견했다면 Sync 버튼을, 발견하지 못했다면 서버를 열고 Stop Streaming을 클릭하고 다시 Start Streaming 버튼을 클릭해 재연결을 시도합니다.
* Sync 버튼을 클릭했다면 T자 자세로 3초간 대기합니다.
* 자세 동기화가 실패했을 경우 Re Sync 버튼을 클릭하여 다시 동기화를 시도합니다.
* 실행 파일을 종료하려면 ESC 키를 누릅니다.
